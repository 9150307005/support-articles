id: 360007448654
url: >-
  https://circleci.zendesk.com/api/v2/help_center/en-us/articles/360007448654.json
html_url: >-
  https://support.circleci.com/hc/en-us/articles/360007448654-Why-won-t-my-daemon-service-stay-up-
author_id: 25261361207
comments_disabled: false
draft: false
promoted: false
position: 0
vote_sum: 2
vote_count: 2
section_id: 115003756627
created_at: '2018-07-28T08:42:28Z'
updated_at: '2020-10-22T06:58:45Z'
name: Why won't my daemon/service stay up?
title: Why won't my daemon/service stay up?
source_locale: en-us
locale: en-us
outdated: false
outdated_locales: []
edited_at: '2020-10-22T06:58:45Z'
user_segment_id: null
permission_group_id: 237867
label_names:
  - elasticsearch
body: "<p>You may want to run a daemon or service in the background during your jobs and find that the service isn't available after you've started it. You may be starting it as a background process which causes the run step to exit immediately after it's been started. Take the example of starting Elasticsearch\_below:</p>\n<p><code>- run: ~/elasticsearch-2.4.3/bin/elasticsearch -d</code><br> <br> This results in the step only being active for one second.<br> <br> <img src=\"https://support.circleci.com/hc/article_attachments/360009653533/mceclip1.png\" width=\"665\" height=\"78\"><br> <br> Once the process that started Elasticsearch exits successfully, the step is considered finished.</p>\n<p>To keep Elasticsearch running in the background, add the <strong>background: true</strong> attribute to this step as follows:\_<br> <code>\n  <span class=\"hljs-attr\">- run:</span>\n  <span class=\"hljs-attr\"> <br>\_ \_ name:</span> Elasticsearch<span class=\"hljs-attr\"><br>\_ \_ command:~/elasticsearch-2.4.3/bin/elasticsearch<br></span><span class=\"hljs-attr\">\_ \_ background:</span>\n  true<br>\n  <br>\n  </code> By starting Elasticsearch in the foreground and using the <strong>background: true</strong> attribute of the <strong>run</strong> key our Elasticsearch process will stay active for the duration of the job.</p>\n<p><br> <img src=\"https://support.circleci.com/hc/article_attachments/360009598254/mceclip2.png\" width=\"728\" height=\"67\"></p>\n<p>Further reading:</p>\n<p><a href=\"https://circleci.com/docs/2.0/configuration-reference/#background-commands\">https://circleci.com/docs/2.0/configuration-reference/#background-commands</a></p>"
