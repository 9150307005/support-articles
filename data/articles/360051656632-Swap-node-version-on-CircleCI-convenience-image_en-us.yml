id: 360051656632
url: >-
  https://circleci.zendesk.com/api/v2/help_center/en-us/articles/360051656632.json
html_url: >-
  https://support.circleci.com/hc/en-us/articles/360051656632-Swap-node-version-on-CircleCI-convenience-image
author_id: 405652843914
comments_disabled: true
draft: false
promoted: false
position: 0
vote_sum: -1
vote_count: 1
section_id: 115003580328
created_at: '2020-11-04T19:43:13Z'
updated_at: '2020-11-05T16:10:56Z'
name: Swap node version on CircleCI convenience image
title: Swap node version on CircleCI convenience image
source_locale: en-us
locale: en-us
outdated: false
outdated_locales: []
edited_at: '2020-11-04T19:44:01Z'
user_segment_id: null
permission_group_id: 237847
label_names:
  - node
  - nvm
  - versions
  - swap version
  - node version manager
body: >-
  <p>You may have a situation where the installed and set Node version on a
  CircleCI convenience image is not the one you need. You can install and swap
  node versions using <a href="https://github.com/nvm-sh/nvm" target="_blank"
  rel="noopener">Node Version Manager (NVM).</a></p>

  <pre style="background-color: #f3f3f3;">- run:
      name: Swap node versions
      command: |
        set +e
        wget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.1/install.sh | bash
        export NVM_DIR="$HOME/.nvm"
        [ -s "$NVM_DIR/nvm.sh" ] &amp;&amp; \. "$NVM_DIR/nvm.sh"
        [ -s "$NVM_DIR/bash_completion" ] &amp;&amp; \. "$NVM_DIR/bash_completion"
        nvm install v12
        nvm alias default 12.19.0

        echo 'export NVM_DIR="$HOME/.nvm"' &gt;&gt; $BASH_ENV
        echo '[ -s "$NVM_DIR/nvm.sh" ] &amp;&amp; \. "$NVM_DIR/nvm.sh"' &gt;&gt; $BASH_ENV</pre>
  <p>The above is downloading Node v12 and then setting the default to be used
  for the rest of the job to v12.19.0. The run command should go towards the
  start of the job run and the only items that need to be modified are:</p>

  <pre style="background-color: #f3f3f3;">nvm install v12

  nvm alias default 12.19.0</pre>

  <p>You will want to swap the install command to install the Node version you
  need and then the default command to set the specific version to use for the
  rest of the job.</p>
