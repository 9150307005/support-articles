id: 360048491851
url: >-
  https://circleci.zendesk.com/api/v2/help_center/en-us/articles/360048491851.json
html_url: >-
  https://support.circleci.com/hc/en-us/articles/360048491851-AWS-CLI-Fails-with-TypeError-unsupported-operand-type-s-for-Retry-and-int-
author_id: 403418857853
comments_disabled: true
draft: false
promoted: false
position: 0
vote_sum: 1
vote_count: 1
section_id: 115003756627
created_at: '2020-08-20T22:51:54Z'
updated_at: '2021-02-24T22:37:09Z'
name: >-
  AWS CLI Fails with "TypeError: unsupported operand type(s) for -=: 'Retry' and
  'int'"
title: >-
  AWS CLI Fails with "TypeError: unsupported operand type(s) for -=: 'Retry' and
  'int'"
source_locale: en-us
locale: en-us
outdated: false
outdated_locales: []
edited_at: '2020-08-20T22:51:54Z'
user_segment_id: null
permission_group_id: 237867
label_names: []
body: >-
  <p>If the AWS CLI fails with the below error, it can be due to that fact that
  the AWS CLI is installed under python 2.7 as opposed to python 3.x</p>

  <pre>"TypeError: unsupported operand type(s) for -=: 'Retry' and 'int'"</pre>

  <p>The reason this error may not happen on each build is due to the fact that
  this error only occurs when the AWS CLI retries a network connection. So on
  most builds this code path will never be reached.</p>

  <p>If on the Docker Executor, you can change your python version to 3.x.</p>

  <p>If on Machine Executor, you can make use of pyenv before installing via
  pip. Be sure not to call `pip` with `sudo`.</p>

  <pre>pyenv global 3.7.0
    pip install awscli</pre>
