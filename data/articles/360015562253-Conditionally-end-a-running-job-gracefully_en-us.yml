id: 360015562253
url: >-
  https://circleci.zendesk.com/api/v2/help_center/en-us/articles/360015562253.json
html_url: >-
  https://support.circleci.com/hc/en-us/articles/360015562253-Conditionally-end-a-running-job-gracefully
author_id: 25261361207
comments_disabled: true
draft: false
promoted: false
position: 0
vote_sum: 20
vote_count: 32
section_id: 115003580328
created_at: '2019-01-10T17:14:40Z'
updated_at: '2021-01-19T15:41:15Z'
name: Conditionally end a running job gracefully
title: Conditionally end a running job gracefully
source_locale: en-us
locale: en-us
outdated: false
outdated_locales: []
edited_at: '2020-10-22T06:56:20Z'
user_segment_id: null
permission_group_id: 237867
label_names:
  - job
  - conditional
  - when
body: "<p>Sometimes during a build, you may want to end the job early without generating a failure.</p>\n<p>You can end a job gracefully by running the command: <code class=\"highlighter-rouge\">circleci-agent step halt</code></p>\n<p><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;\">You can combine this with </span><code class=\"highlighter-rouge\" style=\"font-size: 15px;\">if</code><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;\">\_</span><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;\">statements or\_</span><code class=\"highlighter-rouge\" style=\"font-size: 15px;\">when</code><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;\">\_steps\_</span><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;\">to control the lifecycle of the job conditionally.</span></p>\n<h3><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;\">Examples:</span></h3>\n<ul>\n<li><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;\"><strong><code class=\"highlighter-rouge\" style=\"font-size: 15px;\">if</code>\_statement:</strong><br></span></li>\n</ul>\n<pre class=\"bash-command\" title=\"The full bash command used to run this setup\">run: |<br>    if [ \"$CIRCLE_BRANCH\" = \"develop\" ]; then<br><strong>        <span>circleci-agent</span> step halt</strong>\n    fi</pre>\n<p>\_</p>\n<ul>\n<li><strong><code class=\"highlighter-rouge\" style=\"font-size: 15px;\">when</code><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;\">\_step:</span></strong></li>\n</ul>\n<pre>- when:<br>    condition: false<br>    steps:<br>      - run:<br>          command: <strong>circleci-agent step halt</strong></pre>"
