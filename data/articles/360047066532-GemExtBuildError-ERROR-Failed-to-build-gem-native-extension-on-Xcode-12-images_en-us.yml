id: 360047066532
url: >-
  https://circleci.zendesk.com/api/v2/help_center/en-us/articles/360047066532.json
html_url: >-
  https://support.circleci.com/hc/en-us/articles/360047066532--Gem-Ext-BuildError-ERROR-Failed-to-build-gem-native-extension-on-Xcode-12-images
author_id: 382351624233
comments_disabled: true
draft: false
promoted: false
position: 0
vote_sum: -5
vote_count: 5
section_id: 115003327088
created_at: '2020-08-07T08:52:36Z'
updated_at: '2021-01-12T01:51:09Z'
name: >-
  "Gem::Ext::BuildError: ERROR: Failed to build gem native extension" on Xcode
  12 images
title: >-
  "Gem::Ext::BuildError: ERROR: Failed to build gem native extension" on Xcode
  12 images
source_locale: en-us
locale: en-us
outdated: false
outdated_locales: []
edited_at: '2020-10-22T06:57:46Z'
user_segment_id: null
permission_group_id: 237867
label_names: []
body: "<p>The tooling provided by Apple alongside Xcode 12 (the Command Line Tools) has introduced some bugs when building Ruby gems that require native extensions - this is mostly due to changes in the Clang compiler.</p>\n<p>In most cases this can be resolved by using one of the additional Rubies we ship with the images (2.7 is recommended). The system Ruby (2.6.3) is known to be very restrictive and problematic when utilising anything that has not been explicitly\_shipped with it.</p>\n<p>The Ruby version can be selected by adding the following to your config file at the beginning of the job:</p>\n<pre># ...<br>run:<br> name: Set Ruby Version<br> command: echo 'chruby ruby-2.7' &gt;&gt; ~/.bash_profile</pre>\n<p>For more information on setting the Ruby version, please see\_<a href=\"https://circleci.com/docs/2.0/testing-ios/#images-using-macos-1015-xcode-112-and-later\" target=\"_self\">our documentation</a>.</p>"
