id: 360045071054
url: >-
  https://circleci.zendesk.com/api/v2/help_center/en-us/articles/360045071054.json
html_url: >-
  https://support.circleci.com/hc/en-us/articles/360045071054-Deploy-to-Heroku-via-circleci-heroku-Orb-fails-with-fatal-protocol-error-
author_id: 403418857853
comments_disabled: true
draft: false
promoted: false
position: 0
vote_sum: 3
vote_count: 5
section_id: 115003327188
created_at: '2020-03-25T00:44:43Z'
updated_at: '2020-09-25T06:48:33Z'
name: 'Deploy to Heroku via circleci/heroku Orb fails with "fatal: protocol error"'
title: 'Deploy to Heroku via circleci/heroku Orb fails with "fatal: protocol error"'
source_locale: en-us
locale: en-us
outdated: false
outdated_locales: []
edited_at: '2020-09-04T23:51:57Z'
user_segment_id: null
permission_group_id: 237867
label_names:
  - heroku
  - orbs
body: "<p>When deploying to Heroku with the\_<a href=\"https://circleci.com/orbs/registry/orb/circleci/heroku\" target=\"_self\">circleci/heroku Orb</a>, builds can fail with the error message:</p>\n<pre>fatal: protocol error: bad line length character: fata\nerror: error in sideband demultiplexer</pre>\n<p>This can be resolved by manually resetting the Git repository on Heroku.</p>\n<p>With the <a href=\"https://devcenter.heroku.com/articles/heroku-cli\" target=\"_self\">Heroku CLI client</a>, install the <a href=\"https://github.com/heroku/heroku-repo\" target=\"_self\">heroku-repo plugin</a>\_and clear the repository on Heroku. Then push a fresh empty commit to Heroku.</p>\n<pre>heroku plugins:install heroku-repo<br>heroku repo:reset -a example-app<br>git commit --allow-empty -m \"Reset Heroku Repository\"<br>git push heroku master<br>git push origin master</pre>\n<p>\_</p>"
