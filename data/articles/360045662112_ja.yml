id: 360045662112
url: https://circleci.zendesk.com/api/v2/help_center/ja/articles/360045662112.json
html_url: https://support.circleci.com/hc/ja/articles/360045662112
author_id: 365473206774
comments_disabled: true
draft: false
promoted: false
position: 0
vote_sum: 0
vote_count: 0
section_id: 115003327208
created_at: '2020-07-10T06:15:43Z'
updated_at: '2020-10-22T07:03:06Z'
name: Support Bundleのサイズの削減
title: Support Bundleのサイズの削減
source_locale: en-us
locale: ja
outdated: false
outdated_locales: []
edited_at: '2020-10-22T07:03:06Z'
user_segment_id: null
permission_group_id: 237867
label_names: []
body: "<p>しばらく CircleCI Server を稼働していると、Support Bundle のサイズが徐々に肥大化していきます。 これは、Replicated Operator がアプリケーションログを<span style=\"font-weight: 400;\">蓄積していき</span>、それらのログがサポートバンドルの以下のパスに保存されるためです。</p><div class=\"c-message_kit__gutter\"><div class=\"c-message_kit__gutter__right\" data-qa=\"message_content\"><div class=\"c-message_kit__blocks c-message_kit__blocks--rich_text\"><div class=\"c-message__message_blocks c-message__message_blocks--rich_text\"><div class=\"p-block_kit_renderer\" data-qa=\"block-kit-renderer\"><div class=\"p-block_kit_renderer__block_wrapper p-block_kit_renderer__block_wrapper--first\"><div class=\"p-rich_text_block\" dir=\"auto\">\n<div class=\"p-rich_text_section\">&gt;\_ /scheduler/node/&lt;node_id&gt;/scheduler/var/lib/replicated-operator/logs/*</div>\n<div class=\"p-rich_text_section\">&gt; <a class=\"c-link\" href=\"https://help.replicated.com/docs/native/packaging-an-application/support-bundle-v1/\" target=\"_blank\" rel=\"noopener noreferrer\" data-stringify-link=\"https://help.replicated.com/docs/native/packaging-an-application/support-bundle-v1/\" data-sk=\"tooltip_parent\" aria-describedby=\"sk-tooltip-143345\">https://help.replicated.com/docs/native/packaging-an-application/support-bundle-v1/</a>\n</div>\n</div></div></div></div></div></div></div><div class=\"c-message_actions__container c-message__actions\" aria-label=\"Message shortcuts\" data-qa=\"message-actions\">\_</div><div class=\"c-message_actions__container c-message__actions\" aria-label=\"Message shortcuts\" data-qa=\"message-actions\">Replicated Operator で管理されるログサイズの合計は、デフォルトでは、500MB に制限されています。 そのため、以下の手順を実行して、Support Bundleのサイズを削減します。\_<span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;\">以下は、Operator のログファイルの合計サイズを 10MB に制限する、「/etc/default/replicated-operator」コンフィグファイルの例です。</span>\n</div><div class=\"c-message_actions__container c-message__actions\" aria-label=\"Message shortcuts\" data-qa=\"message-actions\">\_</div><div class=\"c-message_actions__container c-message__actions\" aria-label=\"Message shortcuts\" data-qa=\"message-actions\">1. 「APP_LOG_SIZE」環境変数を replicated-operator オプションに追加します。</div><div class=\"c-message_actions__container c-message__actions\" aria-label=\"Message shortcuts\" data-qa=\"message-actions\">\n<pre><code>      $ vim /etc/default/replicated-operator<br>    REPLICATED_OPERATOR_OPTS=\"-e TAGS=local -e LOG_LEVEL=info -e NODENAME=a.dev.instance -e PUBLIC_ADDRESS=1.2.3.4\"<br><br>↓<br><br>REPLICATED_OPERATOR_OPTS=\"-e APP_LOG_SIZE=10MB -e TAGS=local -e LOG_LEVEL=info -e NODENAME=a.dev.instance -e PUBLIC_ADDRESS=1.2.3.4\"   </code></pre>\n<p>2. replicated-operator を再起動します</p>\n<pre><code>$ sudo service replicated-operator restart</code></pre>\n<p>\_</p>\n</div>"
