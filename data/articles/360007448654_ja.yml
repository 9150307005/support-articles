id: 360007448654
url: https://circleci.zendesk.com/api/v2/help_center/ja/articles/360007448654.json
html_url: https://support.circleci.com/hc/ja/articles/360007448654
author_id: 25261361207
comments_disabled: false
draft: false
promoted: false
position: 0
vote_sum: 2
vote_count: 2
section_id: 115003756627
created_at: '2018-07-28T08:42:28Z'
updated_at: '2021-01-12T01:42:35Z'
name: デーモン/サービスが実行されないのはなぜですか？
title: デーモン/サービスが実行されないのはなぜですか？
source_locale: en-us
locale: ja
outdated: false
outdated_locales: []
edited_at: '2021-01-12T01:42:35Z'
user_segment_id: null
permission_group_id: 237867
label_names:
  - elasticsearch
body: "<p>ジョブの実行中にデーモンやサービスをバックグラウンドで実行させようとしても、起動後にサービスが利用可能でない場合があります。 これが発生する原因は、起動したバックグラウンドプロセスが、起動直後にプロセス自体を終了するステップを実行している可能性があるからです。 次に示す、Elasticsearch の起動ステップを例にとって考えてみます。</p><p><code>- run: ~/elasticsearch-2.4.3/bin/elasticsearch -d</code><br> <br> This results in the step only being active for one second.<br> <br> <img src=\"https://support.circleci.com/hc/article_attachments/360009653533/mceclip1.png\" width=\"665\" height=\"78\"><br> <br> Once the process that started Elasticsearch exits successfully, the step is considered finished.</p><p>To keep Elasticsearch running in the background, add the <strong>background: true</strong> attribute to this step as follows:\_<br> <code>  <span class=\"hljs-attr\">- run:</span>  <span class=\"hljs-attr\"> <br>\_ \_ name:</span> Elasticsearch<span class=\"hljs-attr\"><br>\_ \_ command:~/elasticsearch-2.4.3/bin/elasticsearch<br></span><span class=\"hljs-attr\">\_ \_ background:</span>  true<br>  <br>  </code> By starting Elasticsearch in the foreground and using the <strong>background: true</strong> attribute of the <strong>run</strong> key our Elasticsearch process will stay active for the duration of the job.</p><p><br> <img src=\"https://support.circleci.com/hc/article_attachments/360009598254/mceclip2.png\" width=\"728\" height=\"67\"></p><p>Further reading:</p><p><a href=\"https://circleci.com/docs/2.0/configuration-reference/#background-commands\">https://circleci.com/docs/2.0/configuration-reference/#background-commands</a></p>"
