id: 360003649774
url: https://circleci.zendesk.com/api/v2/help_center/ja/articles/360003649774.json
html_url: https://support.circleci.com/hc/ja/articles/360003649774
author_id: 25261361207
comments_disabled: true
draft: false
promoted: false
position: 0
vote_sum: -141
vote_count: 291
section_id: 115003756627
created_at: '2018-04-29T21:58:26Z'
updated_at: '2021-02-14T02:30:22Z'
name: ディレクトリの作成またはファイルへの書き込み時にアクセスが拒否される
title: ディレクトリの作成またはファイルへの書き込み時にアクセスが拒否される
source_locale: en-us
locale: ja
outdated: false
outdated_locales: []
edited_at: '2020-10-29T05:58:24Z'
user_segment_id: null
permission_group_id: 237867
label_names:
  - permissions
body: "<p>ディレクトリを作成するアクセス許可、またはディレクトリにファイルを書き込むアクセス許可がないというエラーが表示されることがあります。この場合は、ビルドを実行しているユーザーが所有していないディレクトリに、スクリプトが書き込みを試みていることが考えられます。</p><p>これは、多くのユーザーが CI 環境に移行するときのよくある問題です。</p><p>確認しておきたい大切なポイントは、MacOS ビルドの場合は\_<code>distiller</code>\_ユーザーとして、Linux ビルドの場合は一般的に\_<code>ubuntu</code>\_として、ビルドが実行されるということです。 これらのユーザーは、自分の\_<code>$HOME</code>\_フォルダーと、<code>/tmp</code> などの場所にのみ書き込みアクセス許可があります。 これは CI に固有の問題ではなく、ほとんどの Linux/Unix 環境のデフォルト設定です。</p><p> <code>whoami</code> コマンドを実行して、ビルドを実行しているユーザーを確認できます。\n<br><br><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif; font-size: 1.5em;\">ソリューション</span>\n</p><ol>\n<li>必要なファイルをビルド実行ユーザーがアクセス許可を持つフォルダーに保存します。</li>\n<li>書き込みを試みる前に、<code>chown</code>\_コマンドを使用して、ディレクトリの所有権を変更します。</li>\n</ol><p>CircleCI では 1 番目のソリューションをおすすめします。 2 つ目のソリューションを使用する場合、MacOS と Linux の両方のビルドで、次のコマンドを使用できます。</p><p><code>chown -R $USER:$USER /path/to/directory\n</code></p><p><code>$USER</code>\_は、現在ログインしているユーザーを示すグローバル環境変数です。</p><p><code>/path/to/directory</code>\_は、書き込み先のパスに置き換えます。</p>"
