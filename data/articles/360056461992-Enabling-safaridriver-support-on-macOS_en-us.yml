id: 360056461992
url: >-
  https://circleci.zendesk.com/api/v2/help_center/en-us/articles/360056461992.json
html_url: >-
  https://support.circleci.com/hc/en-us/articles/360056461992-Enabling-safaridriver-support-on-macOS
author_id: 382351624233
comments_disabled: true
draft: false
promoted: false
position: 0
vote_sum: 0
vote_count: 0
section_id: 115003327088
created_at: '2021-02-10T11:52:45Z'
updated_at: '2021-02-10T11:52:45Z'
name: Enabling safaridriver support on macOS
title: Enabling safaridriver support on macOS
source_locale: en-us
locale: en-us
outdated: false
outdated_locales: []
edited_at: '2021-02-10T11:52:45Z'
user_segment_id: null
permission_group_id: 237847
label_names: []
body: >-
  <p>To run browser tests in Safari, the Apple-provided safaridriver needs to be
  enabled before interaction with Safari can take place. Without enabling this,
  you may run into the following type of errors:</p>

  <pre class="css-wji0jr">SessionNotCreatedError: Could not create a session:
  You must enable the 'Allow Remote Automation' option in Safari's Develop menu
  to control Safari via WebDriver.
      at Object.throwDecodedError (node_modules/selenium-webdriver/lib/error.js:517:15)
      at parseHttpResponse (node_modules/selenium-webdriver/lib/http.js:655:13)
      at Executor.execute (node_modules/selenium-webdriver/lib/http.js:581:28)
      at processTicksAndRejections (node:internal/process/task_queues:94:5)</pre>
  <p>To resolve this, simply run the following near the start of your job:</p>

  <pre><span>- run: defaults write com.apple.Safari AllowRemoteAutomation
  1</span></pre>

  <p>If this alone does not resolve the issue, try adding the following
  additional command directly afterwards:</p>

  <pre>- run: sudo safaridriver --enable</pre>
