<p>ジョブの実行中にデーモンやサービスをバックグラウンドで実行させようとしても、起動後にサービスが利用可能でない場合があります。 これが発生する原因は、起動したバックグラウンドプロセスが、起動直後にプロセス自体を終了するステップを実行している可能性があるからです。 次に示す、Elasticsearch の起動ステップを例にとって考えてみます。</p>
<p>- run: ~/elasticsearch-2.4.3/bin/elasticsearch -d<br><br>この場合、ステップがアクティブになるのは 1 秒間のみです。 <br><br><img src="https://support.circleci.com/hc/article_attachments/360009653533/mceclip1.png" width="665" height="78"><br><br>Elasticsearch バックグラウンドプロセスを起動するプロセスが正常に終了すると、そのステップは完了したと見なされ、ステップ全体が終了します。<br><br><span class="hljs-attr">- run:</span> <span class="hljs-attr"> <br> name:</span> Elasticsearch<span class="hljs-attr"><br> command:~/elasticsearch-2.4.3/bin/elasticsearch<br></span><span class="hljs-attr"> background:</span> true<br><br>Elasticsearch をフォアグラウンドで起動し、 <strong>run</strong> キーの <strong>background: true</strong> 属性を使用すると、Elasticsearch プロセスはジョブが動作している限りアクティブ状態になります。</p>
<p><br><img src="https://support.circleci.com/hc/article_attachments/360009598254/mceclip2.png" width="728" height="67"></p>
<p>関連情報</p>
<p><a href="https://circleci.com/docs/2.0/configuration-reference/#background-commands">https://circleci.com/docs/2.0/configuration-reference/#background-commands</a></p>